{"version":3,"file":"format-BbxJEvr0.js","sources":["../../src/shared/chains.ts","../../src/utils/format.ts"],"sourcesContent":["export type ChainInfo = {\n  chainId: number\n  name: string\n  nativeSymbol: string\n  rpcUrls: string[]\n  blockExplorerUrl?: string\n  isTestnet?: boolean\n  isCustom?: boolean\n}\n\n/**\n * NETWORK MODE\n * Default: testnet\n */\nexport type NetworkMode = \"testnet\" | \"mainnet\"\n\nfunction readEnv(key: string): string | undefined {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const viteVal = (typeof import.meta !== \"undefined\" && (import.meta as any)?.env?.[key]) as\n    | string\n    | undefined\n  if (viteVal) return viteVal\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const nodeVal = (typeof process !== \"undefined\" && (process as any)?.env?.[key]) as\n    | string\n    | undefined\n  return nodeVal\n}\n\nexport const NETWORK_MODE: NetworkMode =\n  (readEnv(\"VITE_NETWORK_MODE\") as NetworkMode) ||\n  (readEnv(\"NETWORK_MODE\") as NetworkMode) ||\n  \"testnet\"\n\n/**\n * Built-in chains\n */\nexport const MAINNET_CHAINS: Record<number, ChainInfo> = {\n  1: {\n    chainId: 1,\n    name: \"Ethereum\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://cloudflare-eth.com\"],\n    blockExplorerUrl: \"https://etherscan.io\",\n    isTestnet: false\n  },\n  8453: {\n    chainId: 8453,\n    name: \"Base\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://mainnet.base.org\"],\n    blockExplorerUrl: \"https://basescan.org\",\n    isTestnet: false\n  },\n  42161: {\n    chainId: 42161,\n    name: \"Arbitrum One\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://arb1.arbitrum.io/rpc\"],\n    blockExplorerUrl: \"https://arbiscan.io\",\n    isTestnet: false\n  },\n  137: {\n    chainId: 137,\n    name: \"Polygon\",\n    nativeSymbol: \"MATIC\",\n    rpcUrls: [\"https://polygon-rpc.com\"],\n    blockExplorerUrl: \"https://polygonscan.com\",\n    isTestnet: false\n  },\n  43114: {\n    chainId: 43114,\n    name: \"Avalanche C-Chain\",\n    nativeSymbol: \"AVAX\",\n    rpcUrls: [\"https://api.avax.network/ext/bc/C/rpc\"],\n    blockExplorerUrl: \"https://snowtrace.io\",\n    isTestnet: false\n  }\n}\n\nexport const TESTNET_CHAINS: Record<number, ChainInfo> = {\n  11155111: {\n    chainId: 11155111,\n    name: \"Ethereum Sepolia\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://rpc.sepolia.org\"],\n    blockExplorerUrl: \"https://sepolia.etherscan.io\",\n    isTestnet: true\n  },\n  84532: {\n    chainId: 84532,\n    name: \"Base Sepolia\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://sepolia.base.org\"],\n    blockExplorerUrl: \"https://sepolia.basescan.org\",\n    isTestnet: true\n  },\n  421614: {\n    chainId: 421614,\n    name: \"Arbitrum Sepolia\",\n    nativeSymbol: \"ETH\",\n    rpcUrls: [\"https://sepolia-rollup.arbitrum.io/rpc\"],\n    blockExplorerUrl: \"https://sepolia.arbiscan.io\",\n    isTestnet: true\n  },\n  80002: {\n    chainId: 80002,\n    name: \"Polygon Amoy\",\n    nativeSymbol: \"POL\",\n    rpcUrls: [\"https://rpc-amoy.polygon.technology\"],\n    blockExplorerUrl: \"https://amoy.polygonscan.com\",\n    isTestnet: true\n  },\n  43113: {\n    chainId: 43113,\n    name: \"Avalanche Fuji C-Chain\",\n    nativeSymbol: \"AVAX\",\n    rpcUrls: [\"https://api.avax-test.network/ext/bc/C/rpc\"],\n    blockExplorerUrl: \"https://testnet.snowtrace.io\",\n    isTestnet: true\n  }\n}\n\n/**\n * These are ONLY the built-in active chains.\n * Custom chains are stored in chrome.storage and merged in background.ts.\n */\nexport const CHAINS: Record<number, ChainInfo> =\n  NETWORK_MODE === \"mainnet\" ? MAINNET_CHAINS : TESTNET_CHAINS\n\nexport const DEFAULT_CHAIN_ID =\n  NETWORK_MODE === \"mainnet\" ? 43114 : 11155111\n\nexport const CHAIN_ORDER: number[] =\n  NETWORK_MODE === \"mainnet\"\n    ? [1, 8453, 42161, 137, 43114]\n    : [11155111, 84532, 421614, 80002, 43113]\n\nexport function toHexChainId(chainId: number) {\n  if (!Number.isSafeInteger(chainId) || chainId <= 0) {\n    throw new Error(`Invalid chainId: ${chainId}`)\n  }\n  return \"0x\" + chainId.toString(16)\n}\n\n/**\n * Parse chainId entered by user:\n * supports \"8453\" and \"0x2105\"\n */\nexport function parseChainId(input: string): number {\n  const v = input.trim()\n  if (!v) return NaN\n  if (v.startsWith(\"0x\") || v.startsWith(\"0X\")) {\n    const n = Number.parseInt(v.slice(2), 16)\n    return Number.isFinite(n) ? n : NaN\n  }\n  const n = Number(v)\n  return Number.isFinite(n) ? n : NaN\n}\n\nexport function normalizeUrl(url: string) {\n  return url.trim().replace(/\\/+$/, \"\")\n}\n\nexport function isValidHttpUrl(url: string) {\n  try {\n    const u = new URL(url)\n    return u.protocol === \"http:\" || u.protocol === \"https:\"\n  } catch {\n    return false\n  }\n}\n\nexport function explorerTxUrl(chainId: number, txHash: string) {\n  const c = CHAINS[chainId]\n  if (!c?.blockExplorerUrl) return undefined\n  return `${normalizeUrl(c.blockExplorerUrl)}/tx/${txHash}`\n}\n\nexport function explorerAddressUrl(chainId: number, address: string) {\n  const c = CHAINS[chainId]\n  if (!c?.blockExplorerUrl) return undefined\n  return `${normalizeUrl(c.blockExplorerUrl)}/address/${address}`\n}\n\n/**\n * Non-EVM placeholder list (UI only, not connected yet)\n */\nexport const NON_EVM_CHAINS = [\n  { key: \"bitcoin\", name: \"Bitcoin\", enabled: false }\n] as const\n","import { ethers } from \"ethers\"\n\nexport function shortAddr(addr: string) {\n  if (!addr) return \"\"\n  return addr.slice(0, 6) + \"â€¦\" + addr.slice(-4)\n}\n\nexport function safeJsonParse<T>(s: string): T | null {\n  try { return JSON.parse(s) as T } catch { return null }\n}\n\nexport function hexToBigInt(v?: string) {\n  if (!v) return undefined\n  if (typeof v !== \"string\") return undefined\n  return BigInt(v)\n}\n\nexport function toBigIntFromHexOrNumber(v: any): bigint | undefined {\n  if (v == null) return undefined\n  if (typeof v === \"bigint\") return v\n  if (typeof v === \"number\") return BigInt(v)\n  if (typeof v === \"string\") {\n    if (v.startsWith(\"0x\") || v.startsWith(\"0X\")) return BigInt(v)\n    // decimal\n    if (/^\\d+$/.test(v)) return BigInt(v)\n  }\n  return undefined\n}\n\nexport function normalizeHex(hex: string) {\n  return hex.startsWith(\"0x\") ? hex : (\"0x\" + hex)\n}\n\nexport function utf8ToHex(str: string) {\n  return ethers.hexlify(ethers.toUtf8Bytes(str))\n}\n"],"names":["readEnv","key","_a","_b","_c","viteVal","NETWORK_MODE","MAINNET_CHAINS","TESTNET_CHAINS","DEFAULT_CHAIN_ID","toHexChainId","chainId","parseChainId","input","v","n","normalizeUrl","url","isValidHttpUrl","u","NON_EVM_CHAINS","shortAddr","addr","toBigIntFromHexOrNumber"],"mappings":"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"}